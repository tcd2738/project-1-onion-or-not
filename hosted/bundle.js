(()=>{var e={90:(e,t,n)=>{const o=n(726),s=n(299),a=async e=>{const t=document.querySelector("#articleTitle"),n=`roomID=${e}`,o=await fetch("/displayNextArticle",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:n});if(200==o.status){const e=await o.json();t.innerHTML=e.article.title,s.handleResponse(o,!1)}else s.handleResponse(o,!0)},d=(e,t)=>{11!=e?document.getElementById("roundNum").innerHTML=e:i(t)},i=async e=>{const t=(await r("/getGameData","get",!0)).rooms[e];let n,o=0;Object.keys(t.users).forEach((e=>{t.users[e].points>o&&(n=e,o=t.users[e].points)})),document.getElementById("winnerHolder").innerHTML=n+" wins with "+o+" points!";const s=document.getElementById("articleTitle");document.getElementById("nextQuestion").classList.add("hide"),s.classList.add("hide")},r=async(e,t,n)=>{let o=await fetch(e,{method:t,headers:{Accept:"application/json"}});if(1==n)return await o.json();s.handleResponse(o,"head"!==t)};e.exports={updateArticle:a,updateRound:d,requestUpdate:r,userPostAdd:async(e,t)=>{const n=e.querySelector("#nameField").value,a=`name=${n}&roomID=${t}`;let d=await fetch("/addUser",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:a});201==d.status&&o.createPlayer(n,t),s.handleResponse(d,!0)},nextQuestion:async e=>{const t=`roomID=${e}`;let n=await fetch("/updatePointsStreaks",{method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:t});s.handleResponse(n,!0);const o=(await r("/getGameData","get",!0)).rooms[e];Object.keys(o.users).forEach((e=>{const t=document.getElementById(e+"Points"),n=document.getElementById(e+"Streak");t.innerHTML=o.users[e].points,n.innerHTML=o.users[e].streak,document.getElementById(e+"Guess").innerHTML=""})),d(o.roundNum,e),a(e)},sendPut:async e=>{const t=e.getAttribute("action"),n=e.getAttribute("method");let o=await fetch(t,{method:n,headers:{Accept:"application/json"}});s.handleResponse(o,!0)}}},726:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createPlayer:()=>s});const o=n(299),s=(e,t)=>{var n;document.getElementById("currentUsers").innerHTML+=`\n    <div id="${n=e}">\n        <p id="${n}Name"></p>\n        <label>Current guess:</label>\n        <p id="${n}Guess"></p>\n        <form id="${n}GuessForm" action="/addGuess" method="post">\n            <label for="guess">Is it The Onion? ('y' or 'n'): </label>\n            <input type="radio" id="onionY${n}" name="isItOnion${n}" value="y">\n            <label for="onionY">yes</label><br>\n            <input type="radio" id="onionN${n}" name="isItOnion${n}" value="n">\n            <label for="onionN">no</label><br>\n            <input type="submit" value="Post Guess Method" />\n        </form>\n        <label>Points:</label>\n        <p id="${n}Points"></p>\n        <label>Current Streak:</label>\n        <p id="${n}Streak"></p>\n        <button id="remove${n}Button" action="/removeUser" method="post" type="button">Stop playing?</button>\n    </div>\n    `;const s=document.getElementById("remove"+e+"Button"),a=document.getElementById(e+"GuessForm");s.addEventListener("click",(()=>((async(e,t)=>{const n=`name=${e}&roomID=${t}`;let s=await fetch("/removeUser",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:n});202==s.status&&(document.getElementById(e).innerHTML=""),o.handleResponse(s,!0)})(e,t),!1))),a.addEventListener("submit",(n=>(n.preventDefault(),(async(e,t)=>{const n=document.getElementsByName("isItOnion"+e);let s;console.log(n);for(let e of n)e.checked&&(s=e.value);const a=`name=${e}&isOnion=${s}&roomID=${t}`;console.log(a);let d=await fetch("/addGuess",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:a});201==d.status&&(document.getElementById(e+"Guess").innerHTML=s),o.handleResponse(d,!0)})(e,t),!1))),document.getElementById(e+"Name").innerHTML=e,document.getElementById(e+"Points").innerHTML=0,document.getElementById(e+"Streak").innerHTML=0}},299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{handleResponse:()=>o});const o=async(e,t)=>{const n=document.querySelector("#responseHandler");switch(e.status){case 200:n.innerHTML="<b>Success</b>";break;case 201:n.innerHTML="<b>Created</b>";break;case 202:n.innerHTML="<b>Accepted</b>";case 204:return void(n.innerHTML="<b>Updated (No Content)</b>");case 400:n.innerHTML="<b>Bad Request</b>";break;case 404:n.innerHTML="<b>Not Found</b>";break;default:n.innerHTML="<b>Response code not implemented by client.</b>"}if(t){let t=await e.json();t.message?n.innerHTML+=`<p>${t.message}</p>`:t&&(n.innerHTML+=`<p>${JSON.stringify(t)}</p>`),console.log(t)}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(299),t=n(90);let o;beginGame=()=>{const e=document.getElementById("instructions"),t=document.getElementById("addUserForm"),n=document.getElementById("startButton");e.classList.add("hide"),t.classList.add("hide"),n.classList.add("hide");const o=document.getElementById("articleTitle");document.getElementById("nextQuestion").classList.remove("hide"),o.classList.remove("hide"),document.getElementById("roundNum").innerHTML=1},window.onload=async()=>{await(async()=>{let t=await fetch("/createRoom",{method:"post",headers:{Accept:"application/json"}});if(201==t.status){const e=await t.json();o=e.roomID}e.handleResponse(t,!1)})(),t.updateArticle(o);const n=document.getElementById("startButton"),s=document.getElementById("addUserForm"),a=document.getElementById("nextQuestion");n.addEventListener("click",(e=>(beginGame(),!1))),s.addEventListener("submit",(e=>(e.preventDefault(),t.userPostAdd(s,o),!1))),a.addEventListener("click",(e=>(t.nextQuestion(o),!1)))}})()})();